# ピアノ運指データを用いた統計学習手法による運指推定と演奏難易度の定式化

https://www.ipsj.or.jp/kenkyukai/event/mus124.html
2019/8

## 対象

> 本稿では，これまで調べられてきた HMM の高次への拡張
と，多声（ポリフォニック）音楽における制約を取り込む
改良を提案する．また，これまでのモデルのように音符単
位ではなく，和音単位で潜在状態が定義される別の構造を
持つ HMM（和音 HMM と呼ぶ）も提案する．

> 以上の定式化では，モデルは打鍵時刻や離鍵時刻を記述
しておらず，音符の時間順序には依存するが時間間隔には
依存しないモデルになっている．音符の時間間隔はほとん
どの既存研究で考慮されておらず，本研究でも考慮しない．

## 手法

> 最も一般の設定では，出力確率 P(pn| pn−1, fn−1, fn) は
88^2· 5^2(∼ 2 × 105) 個のパラメータを持つ．限られたデー
タ量でこれらすべてのパラメータを正確に推定するのは困難

+ 移調対称性
    - C5->D5 と D5->E5 は同じコストとする
+ 時間反転対称性
    - C5->D5 と D5->C5 は同じコストとする
+ 鏡映対称性
    - 右手C5->D5 と 左手C5->B4 は同じコストとする
+ 大きな音高の遷移（跳躍）を等しく扱う
    - C5->B5 と C5->C6 は同じコストとする

> ここでは，文献 [19] で提案されたモデルの確率的定式化である，「和音 HMM」と呼ぶもう一つの HMM を構築する．・・・音符ごとに状態遷移を考える代わりに，このモデルでは状態を和音ごとに定義する．  
・・・  
このモデルの状態は各和音に対する全ての運指の組み合わせにより構成する．和音内では指くぐりはないこと，および各々の音高が別の指で弾かれることを仮定すると  
・・・  
特徴は，離鍵時刻も考慮して，音符が弾
かれている間は後続の和音の構成音に含まれるようになっ
ていることである．替え指の可能性を無視すると，音符が
弾き続けられる時は同じ指が使われるように状態遷移が制約される．
元のモデル [19] では垂直コストと水平コストが考えられている．

## 評価

> 適切なピアノ運指は唯一ではないことを考慮すれば，複
数の正解データに対して使える評価尺度が必要である [26]．
一つの完全な評価尺度を見つけることは難しいため，いく
つかの可能な尺度をここで提案する．

・一般的一致率　各正解データに対する一致率の平均
・最高一致率　各正解データに対する一致率のうち、最大のもの
・柔軟一致率　各正解データの運指のうち１つでも一致していれば正解
・組換一致率　各正解データを切り貼りした運指列から一致率を求める

> 統計モデルに基づく手法は，データから効率的にパラメータ
が推定できる長所を持ち，十分な量の学習データがあれば，
1 次の HMM ですら代表的な制約に基づく手法 [25] より
も推定精度が高いことがわかった．  
・・・  
本研究で達成した最高の推定
精度は人間の演奏者間の運指の一致度よりもまだ低く，さ
らなるモデルの改良の方向性について議論した．

局所性といったモデルが持つ弱点

> 2 次の HMM のものの方が正解により近
い．実際，楽譜の中程の G5-E5-A5 に対する運指としては
4-2-5 の方がより自然で，2 次の HMM では考慮される G5
から A5 に移る指の動きがこの判断に重要である．

> その限界についても明らかになった．
1 章で論じたように，運指のメカニズムを理解するには，
最終的には運指のコストの定量化が必要だと考えられる．  
・・・  
しかし，運指の決定過程において統計学習
それ自体が重要である可能性も気に留めるべきである．例
えば，現代の運指の実践（例えば [6]）と古典的な実践（例
えば [3]）とは大きく異なる．これらの問題についてのさ
らなる研究は今後の課題とする．

人間が運指を決める際も、実はコストではなく統計的に決定しているのではないか